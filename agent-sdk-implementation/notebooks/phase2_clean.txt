# Phase 2: Development - Agent Creation with Salesforce SDK
import json

print("=" * 80)
print("PHASE 2: DEVELOPMENT - AGENT CREATION")
print("=" * 80)
print("This phase creates a REAL agent using the Salesforce Agent SDK")
print("Prerequisites: agent_spec_sdk.json from Phase 1")
print("=" * 80)

# Step 1: Import Salesforce Agent SDK
print("\n[Step 1/4] Importing Salesforce Agent SDK...")
try:
    from agent_sdk import Agentforce, AgentUtils
    from agent_sdk.core.auth import BasicAuth
    print("SUCCESS: Agent SDK imported")
except ImportError as e:
    print(f"ERROR: Failed to import agent_sdk: {e}")
    print("Please install: pip install agentforce-sdk")
    raise

# Step 2: Configure Authentication
print("\n[Step 2/4] Configuring Salesforce Authentication...")
username = "your_username@example.com"
password = "your_password"
security_token = ""

try:
    auth = BasicAuth(username=username, password=password, security_token=security_token)
    print(f"SUCCESS: Authenticated as {username}")
except Exception as e:
    print(f"ERROR: Authentication failed: {e}")
    raise

# Step 3: Initialize Agentforce Client
print("\n[Step 3/4] Initializing Agentforce Client...")
try:
    agentforce = Agentforce(auth=auth)
    print("SUCCESS: Agentforce client initialized")
except Exception as e:
    print(f"ERROR: Failed to initialize Agentforce: {e}")
    raise

# Step 4: Create Agent from Specification
print("\n[Step 4/4] Creating Agent from Specification...")
try:
    # Load SDK-compatible specification
    with open('agent_spec_sdk.json', 'r') as f:
        agent_spec = json.load(f)
    
    # Create agent using SDK
    agent = AgentUtils.create_agent_from_dict(agent_spec)
    
    print(f"Agent Name: {agent.name}")
    print(f"Company: {agent.company_name}")
    print(f"Topics: {len(agent.topics)}")
    print("SUCCESS: REAL Agent created (not mock)")
    print("Note: Agent will be deployed in Phase 4")
    
except Exception as e:
    print(f"ERROR: Failed to create agent: {e}")
    raise

print("\n" + "=" * 80)
print("PHASE 2 COMPLETE")
print("=" * 80)
print("Agent created successfully and ready for testing")
print("Next: Phase 3 - Testing & Validation")
print("=" * 80)
